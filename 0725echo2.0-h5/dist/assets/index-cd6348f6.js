import{h as a,r as l,c as e,A as s,o as t,a as u,j as o,u as n,k as d,t as i,y as c,q as r,C as v,w as m,F as p,s as f,I as y,aD as _,p as g,$ as h,a0 as T}from"./vendor-a95f68e4.js";/* empty css              */import{_ as w,r as x,Y as M,x as U,aq as V,k,B as b,t as I,e as D}from"./index-e83e29a3.js";import{g as j,a as C}from"./loan-f8af55bf.js";const F=""+new URL("delete-32c71f01.png",import.meta.url).href,R=a=>(h("data-v-d15a0887"),a=a(),T(),a),L={class:"content"},N={class:"top"},S={class:"tip"},q={class:"type"},B=R((()=>d("span",null,null,-1))),O={class:"form"},z={class:"type"},A=R((()=>d("span",null,"(USDT)",-1))),E={class:"form"},J={class:"formInput"},Y=["placeholder"],$={class:"action"},G=["onClick"],H={class:"selector"},K={class:"type"},P={class:"form"},Q={class:"formInput"},W={class:"loan-detail"},X={class:"item"},Z={class:"left"},aa={class:"right"},la={class:"item"},ea={class:"left"},sa={class:"right"},ta={class:"item"},ua={class:"left"},oa={class:"right"},na={class:"item"},da={class:"left"},ia={class:"right"},ca={class:"bottom"},ra={class:"upload"},va={class:"photo"},ma={class:"hui"},pa={class:"upload-box"},fa={class:"item"},ya=R((()=>d("img",{src:F,alt:"",class:"img"},null,-1))),_a={class:"tit"},ga={class:"item"},ha=R((()=>d("img",{src:F,alt:"",class:"img"},null,-1))),Ta={class:"tit"},wa={class:"item"},xa=R((()=>d("img",{src:F,alt:"",class:"img"},null,-1))),Ma={class:"tit"},Ua=w({__name:"index",setup(h){const{_toast:T}=x(),w=a(),F=l([]),R=l(""),Ua=l({}),Va=l({}),ka=l([]),ba=l([]),Ia=l([]),Da=l([]),ja=a=>{a.status="uploading";let l=new FormData;l.append("file",a.file),V(l).then((l=>{"200"==(l=l.data).code?(a.res=l.data.url,a.status="success"):(f(l.msg),ba.value=[])}))},Ca=a=>{a.status="uploading";let l=new FormData;l.append("file",a.file),V(l).then((l=>{"200"==(l=l.data).code?(a.res=l.data.url,a.status="success"):(f(l.msg),Ia.value=[])}))},Fa=a=>{a.status="uploading";let l=new FormData;l.append("file",a.file),V(l).then((l=>{"200"==(l=l.data).code?(a.res=l.data.url,a.status="success"):(f(l.msg),Da.value=[])}))},Ra=e((()=>{let a=0;return R.value&&(null==Va?void 0:Va.value.odds)&&(null==Va?void 0:Va.value.cycleType)&&(a=k(b(I(I(R.value,Va.value.odds),Va.value.cycleType),100),2)),a})),La={iconRight:[{iconName:"guize",clickTo:"/loan-rule"},{iconName:"jilu",clickTo:"/loan-record"}]},Na=l(!1);s((async()=>{await qa(),Ba()}));const Sa=l(),qa=async()=>{const a=await M("t_repay_type");"200"==a.code&&(Sa.value=a.data)},Ba=async()=>{const a=await j();"200"==a.code&&(F.value=a.rows,ka.value=a.rows.map(((a,l)=>{var e;return{id:l,name:a.cycleType,value:a.id,amountMin:a.amountMin,amountMax:a.amountMax,repayTypeLabel:null==(e=Sa.value)?void 0:e.filter((l=>parseInt(l.dictValue)==a.repayType))[0].dictLabel}})),Oa(ka.value[0]))},Oa=a=>{Ua.value=a,Va.value=F.value.find((l=>l.id==a.value)),Na.value=!1},za=()=>{if(""==R.value||R.value>Va.value.amountMax||R.value<Va.value.amountMin)return void T("loan_amountErr");if(0==ba.value.length)return void T("loan_idcardFront");if(0==Ia.value.length)return void T("loan_idcardReverse");if(0==Da.value.length)return void T("loan_hand");let a=(ba.value[0]||{}).res;let l=(Ia.value[0]||{}).res;let e=(Da.value[0]||{}).res;C({proId:Va.value.id,cycleType:Va.value.cycleType,cardUrl:a,cardBackUrl:l,capitalUrl:e,amount:R.value}).then((a=>{"200"==a.code?(T("loan_applySuccess"),setTimeout((()=>{w.push("/loan-record")}),500)):f(a.msg)}))},Aa=l(!1),Ea=()=>{(R.value>Va.value.amountMax||R.value<Va.value.amountMin)&&(Aa.value=!0,T("loan_amountMore"),R.value="")};return(a,l)=>{const e=y,s=_;return t(),u(p,null,[o(U,{currentName:n(D)("asset_loan"),cuttentRight:La,border_bottom:!0},null,8,["currentName"]),d("div",L,[d("div",N,[d("strong",S,i(n(D)("loan_msg")),1),d("div",q,[c(i(n(D)("loan_product"))+" ",1),B]),d("div",O,[d("div",{class:"formInput",onClick:l[0]||(l[0]=a=>Na.value=!0)},[d("p",null,i(Va.value.amountMin)+"-"+i(Va.value.amountMax),1)])]),d("div",z,[c(i(n(D)("loan_amount"))+" ",1),A]),d("div",E,[d("div",J,[r(d("input",{"onUpdate:modelValue":l[1]||(l[1]=a=>R.value=a),class:"form-input",placeholder:n(D)("loan_pleaseInput"),onBlur:Ea},null,40,Y),[[v,R.value]])])]),o(e,{show:Na.value,"onUpdate:show":l[2]||(l[2]=a=>Na.value=a),style:{"max-width":"var(--ex-max-width)",left:"50%",translate:"-50%"}},{default:m((()=>[d("ul",$,[(t(!0),u(p,null,g(ka.value,(a=>(t(),u("li",{key:a.id,onClick:l=>Oa(a)},[d("div",H,[d("span",null,i(a.amountMin)+"-"+i(a.amountMax)+" USDT",1)])],8,G)))),128))])])),_:1},8,["show"]),d("div",K,i(n(D)("loan_cycle")),1),d("div",P,[d("div",Q,[r(d("input",{"onUpdate:modelValue":l[3]||(l[3]=a=>Va.value.cycleType=a),class:"form-input",disabled:""},null,512),[[v,Va.value.cycleType]])])])]),d("div",W,[d("div",X,[d("div",Z,i(n(D)("loan_rateDay")),1),d("div",aa,i(Va.value.odds)+"%",1)]),d("div",la,[d("div",ea,i(n(D)("loan_interest")),1),d("div",sa,i(Ra.value)+" USDT",1)]),d("div",ta,[d("div",ua,i(n(D)("loan_repayType")),1),d("div",oa,i(Ua.value.repayTypeLabel||""),1)]),d("div",na,[d("div",da,i(n(D)("loan_repayOrg")),1),d("div",ia,i(Va.value.repayOrg),1)])]),d("div",ca,[d("div",ra,[d("div",va,[c(i(n(D)("loan_idImg"))+" ",1),d("span",ma,"("+i(n(D)("loan_idMsg"))+")",1)])]),d("div",pa,[d("div",fa,[o(s,{"after-read":ja,modelValue:ba.value,"onUpdate:modelValue":l[4]||(l[4]=a=>ba.value=a)},{default:m((()=>[ya,d("div",_a,i(n(D)("loan_front")),1)])),_:1},8,["modelValue"])]),d("div",ga,[o(s,{"after-read":Ca,modelValue:Ia.value,"onUpdate:modelValue":l[5]||(l[5]=a=>Ia.value=a)},{default:m((()=>[ha,d("div",Ta,i(n(D)("loan_reverse")),1)])),_:1},8,["modelValue"])]),d("div",wa,[o(s,{"after-read":Fa,modelValue:Da.value,"onUpdate:modelValue":l[6]||(l[6]=a=>Da.value=a)},{default:m((()=>[xa,d("div",Ma,i(n(D)("loan_hand")),1)])),_:1},8,["modelValue"])])]),d("div",{class:"btn",onClick:za},i(n(D)("loan_require")),1)])])],64)}}},[["__scopeId","data-v-d15a0887"]]);export{Ua as default};
