import{an as a,M as e,h as l,r as n,c as s,A as o,o as t,a as u,j as i,u as c,w as r,K as d,k as v,y as p,t as m,q as w,C as y,i as _,E as h,F as f,I as b,p as k,s as q}from"./vendor-a95f68e4.js";import{_ as g,a as N,r as C,f as x,e as P,aJ as A,ac as $,aE as j,as as U,R as V,aK as T,x as E,c as I,g as B,k as L,aL as S,aM as F}from"./index-e83e29a3.js";import{u as K}from"./useFreeze-08cc92b1.js";import{A as R}from"./applyAmount-aff8a3b1.js";const z={class:"sheetBox"},M={class:"title fw-bold"},D=["onClick"],J={class:"bankName"},Q={key:0,class:"scl"},G={class:"cardNumber fw-num"},H={class:"content"},O={class:"form"},W={class:"coin"},X={class:"top coin-top"},Y={key:0,class:"scl"},Z={key:1,class:"scl"},aa={key:0,class:"bottom"},ea={class:"left"},la={class:"title"},na={class:"bankName"},sa={class:"cardNumber fw-num"},oa={class:"num"},ta={class:"top"},ua={class:"bottom"},ia=["placeholder"],ca={key:0,class:"address"},ra={class:"top"},da={class:"bottom"},va=["placeholder"],pa={class:"password"},ma={class:"top"},wa={class:"bottom"},ya=["type","placeholder"],_a={key:0,class:"tip"},ha={key:0},fa={class:"ff-num"},ba={key:1},ka={class:"ff-num"},qa=g({__name:"withdraw-apply",setup(g){var qa,ga,Na;const{_isFreeze:Ca}=K();N();const{_toast:xa}=C(),Pa=x();Pa.getUserInfo();const{userInfo:Aa}=a(Pa),{asset:$a}=a(Pa),ja=e(),Ua=l(),Va=P("withdraw",["latcoin"]),Ta={iconRight:[{iconName:"jilu",clickTo:"/withdraw-order"}]},Ea=n(!1),Ia=n({}),Ba=n(!1),La=s((()=>{var a,e,l,n;let s=0;const o="card"==(null==(a=ja.query)?void 0:a.icon)&&$a.value.findIndex((a=>{var e;return j(a.symbol)==(null==(e=Ia.value.coin)?void 0:e.toLowerCase())}));for(let t=0;t<$a.value.length;t++)"card"==(null==(e=ja.query)?void 0:e.icon)?1==$a.value[t].type&&j($a.value[t].symbol)==(-1!=o?null==(l=Ia.value.coin)?void 0:l.toLowerCase():"usdt")&&(s=$a.value[t].availableAmount,ja.query.type=-1!=o?Ia.value.coin:"USDT"):1==$a.value[t].type&&j($a.value[t].symbol)==(null==(n=ja.query)?void 0:n.icon)&&(s=$a.value[t].availableAmount);return s})),Sa=a=>{let e="";return e=a.substring(0,4)+" *** *** "+a.substring(a.length-4,a.length),e},Fa=n([]);o((()=>{var a;"card"==(null==(a=ja.query)?void 0:a.icon)&&(async()=>{const a=await U();"200"==a.code&&(a.data.length>0?(Fa.value=a.data,Ia.value=Fa.value[0]):(xa("Unbound_bank_card"),setTimeout((()=>{Ua.push("/bind-card")}),1e3)))})()}));const Ka=n(""),Ra=n(null==(ga=null==(qa=Aa.value)?void 0:qa.user)?void 0:ga.address),za=n("");let Ma=()=>{Ka.value=La.value};const Da=n(null==(Na=Aa.value.detail)?void 0:Na.auditStatusAdvanced),Ja=()=>{var a,e,l,n,s,o;Pa.getUserInfo();let t=!0;if(""==Ka.value||Ka.value>La.value||Ka.value<=0)return void xa("withdraw_please_num");if("card"!=(null==(a=ja.query)?void 0:a.icon)&&""==Ra.value)return void xa("withdraw_please_address");if(""==za.value)return void xa("withdraw_please_pwd");null==(null==(e=Aa.value.detail)?void 0:e.userTardPwd)&&(t=!1,xa("withdraw_please_fundPwd"),setTimeout((()=>{Ua.push("/fund-password")}),800)),["paxpay"].includes(__config._APP_ENV)&&Ka.value>500&&(t=!1,"1"!==Da.value?(xa("please_advanced"),setTimeout((()=>{Ua.push("/certification-advanced")}),1e3)):t=!0);let u="";u="card"==(null==(l=ja.query)?void 0:l.icon)?"amount=".concat(L(Ka.value),"&coinType=BANK&pwd=").concat(za.value,"&adress=").concat(Ia.value.cardNumber,"&coin=").concat(null==(n=ja.query)?void 0:n.type.toLowerCase(),"&bankName=").concat(Ia.value.bankName,"&bankUserName=").concat(Ia.value.userName,"&bankBranch=").concat(Ia.value.bankBranch):"amount=".concat(L(Ka.value),"&coinType=").concat(null==(s=ja.query)?void 0:s.type,"&pwd=").concat(za.value,"&adress=").concat(Ra.value,"&coin=").concat(null==(o=ja.query)?void 0:o.icon),t&&(A.includes(__config._APP_ENV)?S().then((a=>{a.data?xa("last_order_info"):Qa(u)})):Ga(u))},Qa=a=>{var e;let l={coin:null==(e=ja.query)?void 0:e.type,address:Ra.value};T(l).then((e=>{"200"==e.code&&Ga(a)}))},Ga=a=>{F(a).then((a=>{"200"==a.code?(xa("withdraw_success"),setTimeout((()=>{Ua.push("/withdraw")}),500)):q(a.msg)}))},Ha=()=>{V.includes(__config._APP_ENV)?Ca(V)&&Ja():Ja()};return o((()=>{var a;A.includes(__config._APP_ENV)&&"card"!=(null==(a=ja.query)?void 0:a.icon)&&(async()=>{var a;let e={coin:null==(a=ja.query)?void 0:a.type};const l=await T(e);"200"==l.code&&l.msg&&(Ra.value=l.msg)})()})),(a,e)=>{var l,n,s,o,q;const g=E,N=I,C=b;return t(),u(f,null,[i(g,{currentName:c(Va),cuttentRight:Ta},null,8,["currentName"]),i(R,{amount:c(La),coin:null==(l=a.$route.query.type)?void 0:l.toUpperCase()},null,8,["amount","coin"]),i(C,{show:c(Ba),"onUpdate:show":e[0]||(e[0]=a=>d(Ba)?Ba.value=a:null),onSelect:a.onSelect,closeable:!1,style:{"max-width":"var(--ex-max-width)",left:"50%",translate:"-50%"}},{default:r((()=>[v("div",z,[v("div",M,m(c(P)("withdraw_select_card")),1),(t(!0),u(f,null,k(c(Fa),((e,l)=>(t(),u("div",{key:l,class:"sheetContent",onClick:a=>(a=>{Ba.value=!1,Ia.value=a})(e)},[i(N,{name:a.$route.query.icon,class:"coin"},null,8,["name"]),v("div",null,[v("p",J,[p(m(null==e?void 0:e.bankName)+" ",1),(null==e?void 0:e.coin)?(t(),u("span",Q,"（"+m(null==e?void 0:e.coin)+"）",1)):_("",!0)]),v("p",G,m(Sa(null==e?void 0:e.cardNumber)),1)])],8,D)))),128))])])),_:1},8,["show","onSelect"]),v("div",H,[v("div",O,[v("div",W,[v("div",X,[p(m(c(P)("withdraw_coin",["bitmake"]))+" ",1),"card"==a.$route.query.icon&&(null==(n=c(Ia))?void 0:n.coin)?(t(),u("span",Y,"（"+m(null==(s=c(Ia))?void 0:s.coin)+"）",1)):(t(),u("span",Z,"（"+m(a.$route.query.type)+"）",1))]),"card"!=a.$route.query.icon?(t(),u("div",aa,[v("div",ea,[i(N,{name:a.$route.query.icon,class:"coin"},null,8,["name"]),v("div",la,m(a.$route.query.type),1)])])):(t(),u("div",{key:1,class:"bottom2",onClick:e[1]||(e[1]=a=>Ba.value=!0)},[i(N,{name:a.$route.query.icon,class:"coin"},null,8,["name"]),v("div",null,[v("p",na,m(null==(o=c(Ia))?void 0:o.bankName),1),v("p",sa,[p(m(Sa((null==(q=c(Ia))?void 0:q.cardNumber)||""))+" ",1),i(N,{name:"jiantou",class:"jiantou"})])])]))]),v("div",oa,[v("div",ta,m(c(P)("withdraw_num",["bitmake"])),1),v("div",ua,[w(v("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=a=>d(Ka)?Ka.value=a:null),placeholder:c(P)("withdraw_input"),class:"ff-num"},null,8,ia),[[y,c(Ka)]]),v("p",{onClick:e[3]||(e[3]=a=>c(Ma)())},m(c(P)("swap_all")),1)])]),"card"!=a.$route.query.icon?(t(),u("div",ca,[v("div",ra,m(c(P)("withdraw_address")),1),v("div",da,[w(v("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>d(Ra)?Ra.value=a:null),placeholder:c(P)("withdraw_input")},null,8,va),[[y,c(Ra)]])])])):_("",!0),v("div",pa,[v("div",ma,m(c(P)("withdraw_pwd",["rxce"])),1),v("div",wa,[w(v("input",{type:c(Ea)?"text":"password","onUpdate:modelValue":e[5]||(e[5]=a=>d(za)?za.value=a:null),placeholder:c(P)("withdraw_input")},null,8,ya),[[h,c(za)]]),i(N,{name:c(Ea)?"yanjin-k":"yanjin-g",class:"yanjing",onClick:e[6]||(e[6]=a=>Ea.value=!c(Ea))},null,8,["name"])])])]),["aams"].includes(a._getConfig("_APP_ENV"))?_("",!0):(t(),u("div",_a,[v("div",null,[p(m(c(P)("withdraw_tip")),1),v("span",{class:"customer",onClick:e[7]||(e[7]=a=>c(B)("event_serviceChange"))},m(c(P)("custorm_service")),1)]),["coinsexpto"].includes(a._getConfig("_APP_ENV"))?(t(),u("div",ha,[p(m(c(P)("withdraw_commission"))+"：",1),v("span",fa,m(a.$route.query.fee||"")+" "+m(a.$route.query.icon.toLocaleUpperCase()),1)])):(t(),u("div",ba,[p(m(c(P)("withdraw_commission"))+"：",1),v("span",ka,m(a.$route.query.ratio)+"%",1)]))]))]),v("div",{class:"btnBox",onClick:Ha},[i($,{btnValue:c(P)("withdraw_require")},null,8,["btnValue"])])],64)}}},[["__scopeId","data-v-14f91e70"]]);export{qa as default};
