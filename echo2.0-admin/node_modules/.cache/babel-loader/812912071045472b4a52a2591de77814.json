{"remainingRequest":"D:\\project\\echo\\echo2.0-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\echo\\echo2.0-admin\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\project\\echo\\echo2.0-admin\\src\\plugins\\socket\\noticeWebSocket.js","dependencies":[{"path":"D:\\project\\echo\\echo2.0-admin\\src\\plugins\\socket\\noticeWebSocket.js","mtime":1700758695433},{"path":"D:\\project\\echo\\echo2.0-admin\\babel.config.js","mtime":1698845798561},{"path":"D:\\project\\echo\\echo2.0-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698846198245},{"path":"D:\\project\\echo\\echo2.0-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1698846200682},{"path":"D:\\project\\echo\\echo2.0-admin\\node_modules\\eslint-loader\\index.js","mtime":1698846198776}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9wcm9qZWN0L2VjaG8vZWNobzIuMC1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiKTsKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkQ6L3Byb2plY3QvZWNoby9lY2hvMi4wLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrLmpzIikpOwp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRDovcHJvamVjdC9lY2hvL2VjaG8yLjAtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanMiKSk7CnZhciBfZGVmaW5lUHJvcGVydHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJEOi9wcm9qZWN0L2VjaG8vZWNobzIuMC1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eS5qcyIpKTsKdmFyIF9zdG9yZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC9zdG9yZSIpKTsKdmFyIF9pbmRleCA9IHJlcXVpcmUoIkAvcGx1Z2lucy9hdWRpby9pbmRleC5qcyIpOwp2YXIgTm90aWNlV2ViU29ja2V0ID0gZXhwb3J0cy5kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBOb3RpY2VXZWJTb2NrZXQodXNlcklkKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgKDAsIF9jbGFzc0NhbGxDaGVjazIuZGVmYXVsdCkodGhpcywgTm90aWNlV2ViU29ja2V0KTsKICAgIC8qKgogICAgICog5b+D6Lez5a6a5pe25ZmoCiAgICAgKi8KICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJoZWFydGJlYXRUaW1lciIsIG51bGwpOwogICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgInVybCIsICIiKTsKICAgIC8qKgogICAgICog55So5oi3aWQKICAgICAqLwogICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgInVzZXJJZCIsICIiKTsKICAgIC8qKgogICAgICog562J5b6F5Y+R6YCB5YiX6KGoCiAgICAgKi8KICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJ3YWl0U2VuZExpc3QiLCBbXSk7CiAgICAvKioKICAgICAqIHNvY2tldCDlrp7kvosKICAgICAqLwogICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgIndzIiwgbnVsbCk7CiAgICAvLyDlt7Lov57mjqUKICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJXU19SRUFEWV9TVEFURV9PUEVOIiwgMSk7CiAgICAvKioKICAgICAqIOWPkemAgQogICAgICovCiAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0aGlzLCAic2VuZCIsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHRyeSB7CiAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAic3RyaW5nIikgewogICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7CiAgICAgICAgfQogICAgICAgIGRhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBkYXRhID0gIiI7CiAgICAgIH0KICAgICAgaWYgKGRhdGEpIHsKICAgICAgICB2YXIgX3RoaXMkd3M7CiAgICAgICAgdmFyIGlzV3NSZWFkeSA9ICgoX3RoaXMkd3MgPSBfdGhpcy53cykgPT09IG51bGwgfHwgX3RoaXMkd3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHdzLnJlYWR5U3RhdGUpID09PSBfdGhpcy5XU19SRUFEWV9TVEFURV9PUEVOOwogICAgICAgIGlmIChpc1dzUmVhZHkpIHsKICAgICAgICAgIF90aGlzLndzLnNlbmQoZGF0YSk7CiAgICAgICAgICBfdGhpcy53YWl0U2VuZExpc3QgPSBfdGhpcy53YWl0U2VuZExpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbGVtKSB7CiAgICAgICAgICAgIHJldHVybiBlbGVtICE9IGRhdGE7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCFfdGhpcy53YWl0U2VuZExpc3QuaW5jbHVkZXMoZGF0YSkpIHsKICAgICAgICAgICAgX3RoaXMud2FpdFNlbmRMaXN0LnB1c2goZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJoZWFydGJlYXQiLCB2b2lkIDApOwogICAgLyoqCiAgICAgKiDlt7Lov57mjqUKICAgICAqLwogICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgIm9uT3BlbiIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2VuZCh7CiAgICAgICAgbWVzc2FnZTogInBpbmciCiAgICAgIH0pOwogICAgICBfdGhpcy53YWl0U2VuZExpc3QuZm9yRWFjaChmdW5jdGlvbiAodGV4dCkgewogICAgICAgIF90aGlzLnNlbmQodGV4dCk7CiAgICAgIH0pOwogICAgfSk7CiAgICAvKioKICAgICAqIOW/g+i3swogICAgICovCiAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0aGlzLCAiaGVhcnRiZWF0IiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5oZWFydGJlYXRUaW1lciAmJiBjbGVhclRpbWVvdXQoX3RoaXMuaGVhcnRiZWF0VGltZXIpOwogICAgICBfdGhpcy5oZWFydGJlYXRUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLnNlbmQoewogICAgICAgICAgbWVzc2FnZTogInBpbmciCiAgICAgICAgfSk7CiAgICAgIH0sIDMgKiAxMDAwKTsKICAgIH0pOwogICAgLyoqCiAgICAgKiDlk43lupTmlbDmja4KICAgICAqLwogICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgIm9uTWVzc2FnZSIsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShlLmRhdGEpOwogICAgICBpZiAoZGF0YS5tZXNzYWdlID09ICJwaW5nIikgewogICAgICAgIC8vIOW/g+i3swogICAgICAgIF90aGlzLmhlYXJ0YmVhdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCJzdWJzY3JpYmVOb3RpY2UiLCBkYXRhKTsKICAgICAgICBpZiAoKGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS52ZXJpZmllZCkgPj0gMCkgewogICAgICAgICAgX3N0b3JlLmRlZmF1bHQuY29tbWl0KCJTRVRfVkVSSUZJRUROVU0iLCBkYXRhLnZlcmlmaWVkKTsKICAgICAgICAgIC8vIOiupOivgemAmuefpQogICAgICAgICAgLy8gaWYgKGRhdGEudmVyaWZpZWQgIT0gc3RvcmUuZ2V0dGVycy53aXRoZHJhd051bSkgewogICAgICAgICAgaWYgKGRhdGEgIT09IG51bGwgJiYgZGF0YSAhPT0gdm9pZCAwICYmIGRhdGEudmVyaWZpZWQpIHsKICAgICAgICAgICAgdmFyIHNyYyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJub3RpY2UzIik7CiAgICAgICAgICAgIHNyYyAmJiBfaW5kZXguX3BsYXlBdWRpby5wbGF5KHsKICAgICAgICAgICAgICBzcmM6IHNyYwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyB9CiAgICAgICAgfQoKICAgICAgICBpZiAoKGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS5yZWNoYXJnZSkgPj0gMCkgewogICAgICAgICAgX3N0b3JlLmRlZmF1bHQuY29tbWl0KCJTRVRfUkVDSEFSR0VOVU0iLCBkYXRhLnJlY2hhcmdlKTsKICAgICAgICAgIC8vIOWFheWAvOmAmuefpQoKICAgICAgICAgIC8vIGlmIChkYXRhLnJlY2hhcmdlICE9IHN0b3JlLmdldHRlcnMud2l0aGRyYXdOdW0pIHsKICAgICAgICAgIGlmIChkYXRhICE9PSBudWxsICYmIGRhdGEgIT09IHZvaWQgMCAmJiBkYXRhLnJlY2hhcmdlKSB7CiAgICAgICAgICAgIHZhciBfc3JjID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIm5vdGljZTEiKTsKICAgICAgICAgICAgX3NyYyAmJiBfaW5kZXguX3BsYXlBdWRpby5wbGF5KHsKICAgICAgICAgICAgICBzcmM6IF9zcmMKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gfQogICAgICAgIH0KCiAgICAgICAgaWYgKGRhdGEgIT09IG51bGwgJiYgZGF0YSAhPT0gdm9pZCAwICYmIGRhdGEud2l0aGRyYXcpIHsKICAgICAgICAgIF9zdG9yZS5kZWZhdWx0LmNvbW1pdCgiU0VUX1dJVEhEUkFXTlVNIiwgZGF0YS53aXRoZHJhdyk7CiAgICAgICAgICAvLyDmj5DnjrDpgJrnn6UKICAgICAgICAgIC8vIGlmIChkYXRhLndpdGhkcmF3ICE9IHN0b3JlLmdldHRlcnMud2l0aGRyYXdOdW0pIHsKICAgICAgICAgIGlmIChkYXRhICE9PSBudWxsICYmIGRhdGEgIT09IHZvaWQgMCAmJiBkYXRhLndpdGhkcmF3KSB7CiAgICAgICAgICAgIHZhciBfc3JjMiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJub3RpY2UyIik7CiAgICAgICAgICAgIF9zcmMyICYmIF9pbmRleC5fcGxheUF1ZGlvLnBsYXkoewogICAgICAgICAgICAgIHNyYzogX3NyYzIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gfQogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICAvKioKICAgICAqIOWFs+mXrQogICAgICovCiAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0aGlzLCAiY2xvc2UiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyR3czI7CiAgICAgIF90aGlzLmhlYXJ0YmVhdFRpbWVyICYmIGNsZWFyVGltZW91dChfdGhpcy5oZWFydGJlYXRUaW1lcik7CiAgICAgIChfdGhpcyR3czIgPSBfdGhpcy53cykgPT09IG51bGwgfHwgX3RoaXMkd3MyID09PSB2b2lkIDAgfHwgX3RoaXMkd3MyLmNsb3NlKCk7CiAgICB9KTsKICAgIC8qKgogICAgICog6L+e5o6l5byC5bi4CiAgICAgKi8KICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJvbkVycm9yIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5oZWFydGJlYXRUaW1lciAmJiBjbGVhclRpbWVvdXQoX3RoaXMuaGVhcnRiZWF0VGltZXIpOwogICAgICBfdGhpcy5yZWNvbm5lY3QoKTsKICAgIH0pOwogICAgLyoqCiAgICAgKiDov57mjqXlhbPpl60KICAgICAqLwogICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgIm9uQ2xvc2UiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLmhlYXJ0YmVhdFRpbWVyICYmIGNsZWFyVGltZW91dChfdGhpcy5oZWFydGJlYXRUaW1lcik7CiAgICB9KTsKICAgIC8qKgogICAgICog6YeN5paw6L+e5o6lCiAgICAgKi8KICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJyZWNvbm5lY3QiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHNldFRpbWVvdXQoX3RoaXMuaW5pdC5hcHBseShfdGhpcyksIDEgKiAxMDAwKTsKICAgIH0pOwogICAgdmFyIGJhc2VVcmwgPSAid3M6Ly9hZG1pbmFwaS5mY2Nlc2hpLnh5eiI7CiAgICAvLyB8fCBfX2NvbmZpZy5fQkFTRV9XU1M7CiAgICB0aGlzLnVzZXJJZCA9IHVzZXJJZDsKICAgIHRoaXMudXJsID0gYmFzZVVybCArICIvd2ViU29ja2V0L25vdGljZS8iLmNvbmNhdCh0aGlzLnVzZXJJZCwgIi8iKS5jb25jYXQoK25ldyBEYXRlKCkpOwogICAgdGhpcy5pbml0KCk7CiAgfQogICgwLCBfY3JlYXRlQ2xhc3MyLmRlZmF1bHQpKE5vdGljZVdlYlNvY2tldCwgW3sKICAgIGtleTogImluaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHRoaXMud3MgPSBuZXcgV2ViU29ja2V0KHRoaXMudXJsKTsKICAgICAgdGhpcy53cy5vbm9wZW4gPSB0aGlzLm9uT3BlbjsKICAgICAgdGhpcy53cy5vbm1lc3NhZ2UgPSB0aGlzLm9uTWVzc2FnZTsKICAgICAgdGhpcy53cy5vbmNsb3NlID0gdGhpcy5vbkNsb3NlOwogICAgICB0aGlzLndzLm9uZXJyb3IgPSB0aGlzLm9uRXJyb3I7CiAgICB9CiAgfV0pOwogIHJldHVybiBOb3RpY2VXZWJTb2NrZXQ7Cn0oKTs="},{"version":3,"names":["_store","_interopRequireDefault","require","_index","NoticeWebSocket","exports","default","userId","_this","_classCallCheck2","_defineProperty2","data","JSON","parse","stringify","error","_this$ws","isWsReady","ws","readyState","WS_READY_STATE_OPEN","send","waitSendList","filter","elem","includes","push","message","forEach","text","heartbeatTimer","clearTimeout","setTimeout","e","heartbeat","console","log","verified","store","commit","src","localStorage","getItem","_playAudio","play","recharge","withdraw","_this$ws2","close","reconnect","init","apply","baseUrl","url","concat","Date","_createClass2","key","value","WebSocket","onopen","onOpen","onmessage","onMessage","onclose","onClose","onerror","onError"],"sources":["D:/project/echo/echo2.0-admin/src/plugins/socket/noticeWebSocket.js"],"sourcesContent":["import store from \"@/store\";\nimport { _playAudio } from \"@/plugins/audio/index.js\";\n\nexport default class NoticeWebSocket {\n  /**\n   * 心跳定时器\n   */\n  heartbeatTimer = null;\n\n  url = \"\";\n  /**\n   * 用户id\n   */\n  userId = \"\";\n  /**\n   * 等待发送列表\n   */\n  waitSendList = [];\n  /**\n   * socket 实例\n   */\n  ws = null;\n  // 已连接\n  WS_READY_STATE_OPEN = 1;\n  constructor(userId) {\n    let baseUrl = \"ws://adminapi.fcceshi.xyz\"\n      // || __config._BASE_WSS;\n    this.userId = userId;\n    this.url = baseUrl + `/webSocket/notice/${this.userId}/${+new Date()}`;\n    this.init();\n  }\n\n  init() {\n    this.ws = new WebSocket(this.url);\n    this.ws.onopen = this.onOpen;\n    this.ws.onmessage = this.onMessage;\n    this.ws.onclose = this.onClose;\n    this.ws.onerror = this.onError;\n  }\n\n  /**\n   * 发送\n   */\n  send = (data) => {\n    try {\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n      data = JSON.stringify(data);\n    } catch (error) {\n      data = \"\";\n    }\n    if (data) {\n      const isWsReady = this.ws?.readyState === this.WS_READY_STATE_OPEN;\n\n      if (isWsReady) {\n        this.ws.send(data);\n        this.waitSendList = this.waitSendList.filter((elem) => elem != data);\n      } else {\n        if (!this.waitSendList.includes(data)) {\n          this.waitSendList.push(data);\n        }\n      }\n    }\n  };\n  heartbeat;\n  /**\n   * 已连接\n   */\n  onOpen = () => {\n    this.send({ message: \"ping\" });\n    this.waitSendList.forEach((text) => {\n      this.send(text);\n    });\n  };\n  /**\n   * 心跳\n   */\n  heartbeat = () => {\n    this.heartbeatTimer && clearTimeout(this.heartbeatTimer);\n    this.heartbeatTimer = setTimeout(() => {\n      this.send({ message: \"ping\" });\n    }, 3 * 1000);\n  };\n  /**\n   * 响应数据\n   */\n  onMessage = (e) => {\n    let data = JSON.parse(e.data);\n    if (data.message == \"ping\") {\n      // 心跳\n      this.heartbeat();\n    } else {\n      console.log(\"subscribeNotice\", data);\n\n      if (data?.verified >= 0) {\n        store.commit(\"SET_VERIFIEDNUM\", data.verified);\n        // 认证通知\n        // if (data.verified != store.getters.withdrawNum) {\n        if (data?.verified) {\n          let src = localStorage.getItem(\"notice3\");\n          src &&\n            _playAudio.play({\n              src,\n            });\n        }\n\n        // }\n      }\n      if (data?.recharge >= 0) {\n        store.commit(\"SET_RECHARGENUM\", data.recharge);\n        // 充值通知\n\n        // if (data.recharge != store.getters.withdrawNum) {\n        if (data?.recharge) {\n          let src = localStorage.getItem(\"notice1\");\n          src &&\n            _playAudio.play({\n              src,\n            });\n        }\n\n        // }\n      }\n      if (data?.withdraw) {\n        store.commit(\"SET_WITHDRAWNUM\", data.withdraw);\n        // 提现通知\n        // if (data.withdraw != store.getters.withdrawNum) {\n        if (data?.withdraw) {\n          let src = localStorage.getItem(\"notice2\");\n          src &&\n            _playAudio.play({\n              src,\n            });\n        }\n\n        // }\n      }\n    }\n  };\n\n  /**\n   * 关闭\n   */\n  close = () => {\n    this.heartbeatTimer && clearTimeout(this.heartbeatTimer);\n    this.ws?.close();\n  };\n\n  /**\n   * 连接异常\n   */\n  onError = () => {\n    this.heartbeatTimer && clearTimeout(this.heartbeatTimer);\n    this.reconnect();\n  };\n\n  /**\n   * 连接关闭\n   */\n  onClose = () => {\n    this.heartbeatTimer && clearTimeout(this.heartbeatTimer);\n  };\n\n  /**\n   * 重新连接\n   */\n  reconnect = () => {\n    setTimeout(this.init.apply(this), 1 * 1000);\n  };\n}\n"],"mappings":"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"}]}