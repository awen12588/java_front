{"remainingRequest":"D:\\project\\echo\\echo2.0-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\echo\\echo2.0-admin\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\project\\echo\\echo2.0-admin\\src\\plugins\\socket\\noticeWebSocket.js","dependencies":[{"path":"D:\\project\\echo\\echo2.0-admin\\src\\plugins\\socket\\noticeWebSocket.js","mtime":1698845798688},{"path":"D:\\project\\echo\\echo2.0-admin\\babel.config.js","mtime":1698845798561},{"path":"D:\\project\\echo\\echo2.0-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698846198245},{"path":"D:\\project\\echo\\echo2.0-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1698846200682},{"path":"D:\\project\\echo\\echo2.0-admin\\node_modules\\eslint-loader\\index.js","mtime":1698846198776}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9wcm9qZWN0L2VjaG8vZWNobzIuMC1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiKTsKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkQ6L3Byb2plY3QvZWNoby9lY2hvMi4wLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrLmpzIikpOwp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRDovcHJvamVjdC9lY2hvL2VjaG8yLjAtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanMiKSk7CnZhciBfZGVmaW5lUHJvcGVydHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJEOi9wcm9qZWN0L2VjaG8vZWNobzIuMC1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eS5qcyIpKTsKdmFyIF9zdG9yZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC9zdG9yZSIpKTsKdmFyIF9pbmRleCA9IHJlcXVpcmUoIkAvcGx1Z2lucy9hdWRpby9pbmRleC5qcyIpOwp2YXIgTm90aWNlV2ViU29ja2V0ID0gZXhwb3J0cy5kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBOb3RpY2VXZWJTb2NrZXQodXNlcklkKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgKDAsIF9jbGFzc0NhbGxDaGVjazIuZGVmYXVsdCkodGhpcywgTm90aWNlV2ViU29ja2V0KTsKICAgIC8qKg0KICAgICAqIOW/g+i3s+WumuaXtuWZqA0KICAgICAqLwogICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgImhlYXJ0YmVhdFRpbWVyIiwgbnVsbCk7CiAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0aGlzLCAidXJsIiwgIiIpOwogICAgLyoqDQogICAgICog55So5oi3aWQNCiAgICAgKi8KICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJ1c2VySWQiLCAiIik7CiAgICAvKioNCiAgICAgKiDnrYnlvoXlj5HpgIHliJfooagNCiAgICAgKi8KICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJ3YWl0U2VuZExpc3QiLCBbXSk7CiAgICAvKioNCiAgICAgKiBzb2NrZXQg5a6e5L6LDQogICAgICovCiAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0aGlzLCAid3MiLCBudWxsKTsKICAgIC8vIOW3sui/nuaOpQogICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgIldTX1JFQURZX1NUQVRFX09QRU4iLCAxKTsKICAgIC8qKg0KICAgICAqIOWPkemAgQ0KICAgICAqLwogICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgInNlbmQiLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICB0cnkgewogICAgICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpOwogICAgICAgIH0KICAgICAgICBkYXRhID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgZGF0YSA9ICIiOwogICAgICB9CiAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgdmFyIF90aGlzJHdzOwogICAgICAgIHZhciBpc1dzUmVhZHkgPSAoKF90aGlzJHdzID0gX3RoaXMud3MpID09PSBudWxsIHx8IF90aGlzJHdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR3cy5yZWFkeVN0YXRlKSA9PT0gX3RoaXMuV1NfUkVBRFlfU1RBVEVfT1BFTjsKICAgICAgICBpZiAoaXNXc1JlYWR5KSB7CiAgICAgICAgICBfdGhpcy53cy5zZW5kKGRhdGEpOwogICAgICAgICAgX3RoaXMud2FpdFNlbmRMaXN0ID0gX3RoaXMud2FpdFNlbmRMaXN0LmZpbHRlcihmdW5jdGlvbiAoZWxlbSkgewogICAgICAgICAgICByZXR1cm4gZWxlbSAhPSBkYXRhOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICghX3RoaXMud2FpdFNlbmRMaXN0LmluY2x1ZGVzKGRhdGEpKSB7CiAgICAgICAgICAgIF90aGlzLndhaXRTZW5kTGlzdC5wdXNoKGRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0aGlzLCAiaGVhcnRiZWF0Iiwgdm9pZCAwKTsKICAgIC8qKg0KICAgICAqIOW3sui/nuaOpQ0KICAgICAqLwogICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgIm9uT3BlbiIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2VuZCh7CiAgICAgICAgbWVzc2FnZTogInBpbmciCiAgICAgIH0pOwogICAgICBfdGhpcy53YWl0U2VuZExpc3QuZm9yRWFjaChmdW5jdGlvbiAodGV4dCkgewogICAgICAgIF90aGlzLnNlbmQodGV4dCk7CiAgICAgIH0pOwogICAgfSk7CiAgICAvKioNCiAgICAgKiDlv4Pot7MNCiAgICAgKi8KICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJoZWFydGJlYXQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLmhlYXJ0YmVhdFRpbWVyICYmIGNsZWFyVGltZW91dChfdGhpcy5oZWFydGJlYXRUaW1lcik7CiAgICAgIF90aGlzLmhlYXJ0YmVhdFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuc2VuZCh7CiAgICAgICAgICBtZXNzYWdlOiAicGluZyIKICAgICAgICB9KTsKICAgICAgfSwgMyAqIDEwMDApOwogICAgfSk7CiAgICAvKioNCiAgICAgKiDlk43lupTmlbDmja4NCiAgICAgKi8KICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJvbk1lc3NhZ2UiLCBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoZS5kYXRhKTsKICAgICAgaWYgKGRhdGEubWVzc2FnZSA9PSAicGluZyIpIHsKICAgICAgICAvLyDlv4Pot7MKICAgICAgICBfdGhpcy5oZWFydGJlYXQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygic3Vic2NyaWJlTm90aWNlIiwgZGF0YSk7CiAgICAgICAgaWYgKChkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEudmVyaWZpZWQpID49IDApIHsKICAgICAgICAgIF9zdG9yZS5kZWZhdWx0LmNvbW1pdCgiU0VUX1ZFUklGSUVETlVNIiwgZGF0YS52ZXJpZmllZCk7CiAgICAgICAgICAvLyDorqTor4HpgJrnn6UKICAgICAgICAgIC8vIGlmIChkYXRhLnZlcmlmaWVkICE9IHN0b3JlLmdldHRlcnMud2l0aGRyYXdOdW0pIHsKICAgICAgICAgIGlmIChkYXRhICE9PSBudWxsICYmIGRhdGEgIT09IHZvaWQgMCAmJiBkYXRhLnZlcmlmaWVkKSB7CiAgICAgICAgICAgIHZhciBzcmMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibm90aWNlMyIpOwogICAgICAgICAgICBzcmMgJiYgX2luZGV4Ll9wbGF5QXVkaW8ucGxheSh7CiAgICAgICAgICAgICAgc3JjOiBzcmMKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gfQogICAgICAgIH0KCiAgICAgICAgaWYgKChkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEucmVjaGFyZ2UpID49IDApIHsKICAgICAgICAgIF9zdG9yZS5kZWZhdWx0LmNvbW1pdCgiU0VUX1JFQ0hBUkdFTlVNIiwgZGF0YS5yZWNoYXJnZSk7CiAgICAgICAgICAvLyDlhYXlgLzpgJrnn6UKCiAgICAgICAgICAvLyBpZiAoZGF0YS5yZWNoYXJnZSAhPSBzdG9yZS5nZXR0ZXJzLndpdGhkcmF3TnVtKSB7CiAgICAgICAgICBpZiAoZGF0YSAhPT0gbnVsbCAmJiBkYXRhICE9PSB2b2lkIDAgJiYgZGF0YS5yZWNoYXJnZSkgewogICAgICAgICAgICB2YXIgX3NyYyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJub3RpY2UxIik7CiAgICAgICAgICAgIF9zcmMgJiYgX2luZGV4Ll9wbGF5QXVkaW8ucGxheSh7CiAgICAgICAgICAgICAgc3JjOiBfc3JjCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIH0KICAgICAgICB9CgogICAgICAgIGlmIChkYXRhICE9PSBudWxsICYmIGRhdGEgIT09IHZvaWQgMCAmJiBkYXRhLndpdGhkcmF3KSB7CiAgICAgICAgICBfc3RvcmUuZGVmYXVsdC5jb21taXQoIlNFVF9XSVRIRFJBV05VTSIsIGRhdGEud2l0aGRyYXcpOwogICAgICAgICAgLy8g5o+Q546w6YCa55+lCiAgICAgICAgICAvLyBpZiAoZGF0YS53aXRoZHJhdyAhPSBzdG9yZS5nZXR0ZXJzLndpdGhkcmF3TnVtKSB7CiAgICAgICAgICBpZiAoZGF0YSAhPT0gbnVsbCAmJiBkYXRhICE9PSB2b2lkIDAgJiYgZGF0YS53aXRoZHJhdykgewogICAgICAgICAgICB2YXIgX3NyYzIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibm90aWNlMiIpOwogICAgICAgICAgICBfc3JjMiAmJiBfaW5kZXguX3BsYXlBdWRpby5wbGF5KHsKICAgICAgICAgICAgICBzcmM6IF9zcmMyCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgLyoqDQogICAgICog5YWz6ZetDQogICAgICovCiAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0aGlzLCAiY2xvc2UiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyR3czI7CiAgICAgIF90aGlzLmhlYXJ0YmVhdFRpbWVyICYmIGNsZWFyVGltZW91dChfdGhpcy5oZWFydGJlYXRUaW1lcik7CiAgICAgIChfdGhpcyR3czIgPSBfdGhpcy53cykgPT09IG51bGwgfHwgX3RoaXMkd3MyID09PSB2b2lkIDAgfHwgX3RoaXMkd3MyLmNsb3NlKCk7CiAgICB9KTsKICAgIC8qKg0KICAgICAqIOi/nuaOpeW8guW4uA0KICAgICAqLwogICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgIm9uRXJyb3IiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLmhlYXJ0YmVhdFRpbWVyICYmIGNsZWFyVGltZW91dChfdGhpcy5oZWFydGJlYXRUaW1lcik7CiAgICAgIF90aGlzLnJlY29ubmVjdCgpOwogICAgfSk7CiAgICAvKioNCiAgICAgKiDov57mjqXlhbPpl60NCiAgICAgKi8KICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJvbkNsb3NlIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5oZWFydGJlYXRUaW1lciAmJiBjbGVhclRpbWVvdXQoX3RoaXMuaGVhcnRiZWF0VGltZXIpOwogICAgfSk7CiAgICAvKioNCiAgICAgKiDph43mlrDov57mjqUNCiAgICAgKi8KICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJyZWNvbm5lY3QiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHNldFRpbWVvdXQoX3RoaXMuaW5pdC5hcHBseShfdGhpcyksIDEgKiAxMDAwKTsKICAgIH0pOwogICAgdmFyIGJhc2VVcmwgPSBfX2NvbmZpZy5fQkFTRV9XU1MgfHwgX19jb25maWcuX0JBU0VfV1NTOwogICAgdGhpcy51c2VySWQgPSB1c2VySWQ7CiAgICB0aGlzLnVybCA9ICIiLmNvbmNhdChiYXNlVXJsLCAiL3dlYlNvY2tldC9ub3RpY2UvIikuY29uY2F0KHRoaXMudXNlcklkLCAiLyIpLmNvbmNhdCgrbmV3IERhdGUoKSk7CiAgICB0aGlzLmluaXQoKTsKICB9CiAgKDAsIF9jcmVhdGVDbGFzczIuZGVmYXVsdCkoTm90aWNlV2ViU29ja2V0LCBbewogICAga2V5OiAiaW5pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdGhpcy53cyA9IG5ldyBXZWJTb2NrZXQodGhpcy51cmwpOwogICAgICB0aGlzLndzLm9ub3BlbiA9IHRoaXMub25PcGVuOwogICAgICB0aGlzLndzLm9ubWVzc2FnZSA9IHRoaXMub25NZXNzYWdlOwogICAgICB0aGlzLndzLm9uY2xvc2UgPSB0aGlzLm9uQ2xvc2U7CiAgICAgIHRoaXMud3Mub25lcnJvciA9IHRoaXMub25FcnJvcjsKICAgIH0KICB9XSk7CiAgcmV0dXJuIE5vdGljZVdlYlNvY2tldDsKfSgpOw=="},{"version":3,"names":["_store","_interopRequireDefault","require","_index","NoticeWebSocket","exports","default","userId","_this","_classCallCheck2","_defineProperty2","data","JSON","parse","stringify","error","_this$ws","isWsReady","ws","readyState","WS_READY_STATE_OPEN","send","waitSendList","filter","elem","includes","push","message","forEach","text","heartbeatTimer","clearTimeout","setTimeout","e","heartbeat","console","log","verified","store","commit","src","localStorage","getItem","_playAudio","play","recharge","withdraw","_this$ws2","close","reconnect","init","apply","baseUrl","__config","_BASE_WSS","url","concat","Date","_createClass2","key","value","WebSocket","onopen","onOpen","onmessage","onMessage","onclose","onClose","onerror","onError"],"sources":["D:/project/echo/echo2.0-admin/src/plugins/socket/noticeWebSocket.js"],"sourcesContent":["import store from \"@/store\";\r\nimport { _playAudio } from \"@/plugins/audio/index.js\";\r\n\r\nexport default class NoticeWebSocket {\r\n  /**\r\n   * 心跳定时器\r\n   */\r\n  heartbeatTimer = null;\r\n\r\n  url = \"\";\r\n  /**\r\n   * 用户id\r\n   */\r\n  userId = \"\";\r\n  /**\r\n   * 等待发送列表\r\n   */\r\n  waitSendList = [];\r\n  /**\r\n   * socket 实例\r\n   */\r\n  ws = null;\r\n  // 已连接\r\n  WS_READY_STATE_OPEN = 1;\r\n  constructor(userId) {\r\n    let baseUrl = __config._BASE_WSS || __config._BASE_WSS;\r\n    this.userId = userId;\r\n    this.url = `${baseUrl}/webSocket/notice/${this.userId}/${+new Date()}`;\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.ws = new WebSocket(this.url);\r\n    this.ws.onopen = this.onOpen;\r\n    this.ws.onmessage = this.onMessage;\r\n    this.ws.onclose = this.onClose;\r\n    this.ws.onerror = this.onError;\r\n  }\r\n\r\n  /**\r\n   * 发送\r\n   */\r\n  send = (data) => {\r\n    try {\r\n      if (typeof data === \"string\") {\r\n        data = JSON.parse(data);\r\n      }\r\n      data = JSON.stringify(data);\r\n    } catch (error) {\r\n      data = \"\";\r\n    }\r\n    if (data) {\r\n      const isWsReady = this.ws?.readyState === this.WS_READY_STATE_OPEN;\r\n\r\n      if (isWsReady) {\r\n        this.ws.send(data);\r\n        this.waitSendList = this.waitSendList.filter((elem) => elem != data);\r\n      } else {\r\n        if (!this.waitSendList.includes(data)) {\r\n          this.waitSendList.push(data);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  heartbeat;\r\n  /**\r\n   * 已连接\r\n   */\r\n  onOpen = () => {\r\n    this.send({ message: \"ping\" });\r\n    this.waitSendList.forEach((text) => {\r\n      this.send(text);\r\n    });\r\n  };\r\n  /**\r\n   * 心跳\r\n   */\r\n  heartbeat = () => {\r\n    this.heartbeatTimer && clearTimeout(this.heartbeatTimer);\r\n    this.heartbeatTimer = setTimeout(() => {\r\n      this.send({ message: \"ping\" });\r\n    }, 3 * 1000);\r\n  };\r\n  /**\r\n   * 响应数据\r\n   */\r\n  onMessage = (e) => {\r\n    let data = JSON.parse(e.data);\r\n    if (data.message == \"ping\") {\r\n      // 心跳\r\n      this.heartbeat();\r\n    } else {\r\n      console.log(\"subscribeNotice\", data);\r\n\r\n      if (data?.verified >= 0) {\r\n        store.commit(\"SET_VERIFIEDNUM\", data.verified);\r\n        // 认证通知\r\n        // if (data.verified != store.getters.withdrawNum) {\r\n        if (data?.verified) {\r\n          let src = localStorage.getItem(\"notice3\");\r\n          src &&\r\n            _playAudio.play({\r\n              src,\r\n            });\r\n        }\r\n\r\n        // }\r\n      }\r\n      if (data?.recharge >= 0) {\r\n        store.commit(\"SET_RECHARGENUM\", data.recharge);\r\n        // 充值通知\r\n\r\n        // if (data.recharge != store.getters.withdrawNum) {\r\n        if (data?.recharge) {\r\n          let src = localStorage.getItem(\"notice1\");\r\n          src &&\r\n            _playAudio.play({\r\n              src,\r\n            });\r\n        }\r\n\r\n        // }\r\n      }\r\n      if (data?.withdraw) {\r\n        store.commit(\"SET_WITHDRAWNUM\", data.withdraw);\r\n        // 提现通知\r\n        // if (data.withdraw != store.getters.withdrawNum) {\r\n        if (data?.withdraw) {\r\n          let src = localStorage.getItem(\"notice2\");\r\n          src &&\r\n            _playAudio.play({\r\n              src,\r\n            });\r\n        }\r\n\r\n        // }\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 关闭\r\n   */\r\n  close = () => {\r\n    this.heartbeatTimer && clearTimeout(this.heartbeatTimer);\r\n    this.ws?.close();\r\n  };\r\n\r\n  /**\r\n   * 连接异常\r\n   */\r\n  onError = () => {\r\n    this.heartbeatTimer && clearTimeout(this.heartbeatTimer);\r\n    this.reconnect();\r\n  };\r\n\r\n  /**\r\n   * 连接关闭\r\n   */\r\n  onClose = () => {\r\n    this.heartbeatTimer && clearTimeout(this.heartbeatTimer);\r\n  };\r\n\r\n  /**\r\n   * 重新连接\r\n   */\r\n  reconnect = () => {\r\n    setTimeout(this.init.apply(this), 1 * 1000);\r\n  };\r\n}\r\n"],"mappings":"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"}]}